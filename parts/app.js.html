<script>
    var app = new Vue({
        el: '#app',
        data: {
            page: 'register',
            api: My.Api(),
            encryptor: My.Encryptor(),
            credsEnc: [],
            loginMessage: ''
        },
        mounted: function () {
        },
        methods: {
            gotoCreds: function() {
                this.page = 'creds';
            },
            logout: function() {
                this.encryptor.forgetPassword();
                this.loginMessage = '';
                this.credsEnc = [];
                this.page = 'login';
            },
            register: function() {
                this.page = 'register';
            },
            registerCanceled: function() {
                this.logout();
            },
            registered: function() {
                this.loginMessage = 'Successfully registered. You may login now :-)';
                this.page = 'login';
            },
            getCreds: function() {
                var self = this;

                this.api.getCreds(function(creds) {
                    self.credsEnc = creds;
                    self.gotoCreds();
                }, function() {
                    // Go to error page here
                    // Logout (remove api key from api and password from encryptor)
                    // Go to login
                    console.log('Could not get credsâ€¦');
                });
            }
        }
    })
</script>
