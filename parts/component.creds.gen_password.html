<script type="text/x-template" id="creds-gen-password-tpl">
    <div>
        <input
            class="form__input"
            type="password"
            v-model="password"
            v-on:input="typingShowHide"
        />

        <button
            class="button"
            v-on:click="pickChar('special', $event)">!?()</button>

        <button
            class="button"
            v-on:click="pickChar('lower', $event)">abc</button>

        <button
            class="button"
            v-on:click="pickChar('upper', $event)">ABC</button>

        <button
            class="button"
            v-on:click="pickChar('number', $event)">123</button>

        <p>
            {{ password.length }}
        </p>

        <button
            class="button"
            type="button"
            v-on:click="passwordGenerated">done</button>
    </div>
</script>


<script>
    Vue.component('creds-gen-password', {
        template: '#creds-gen-password-tpl',
        props: [],
        mounted: function() {
        },
        computed: {
        },
        data: function() {
            return {
                password: '',
                randomGenerator: My.Random()
            };
        },
        methods: {
            pickChar: function(type, event) {
                this.password += this.randomGenerator.randomCharOfType(type);
            },
            passwordGenerated: function() {
                console.log(this.password);
            },
            // duplicate
            typingShowHide: function(event) {
                var self = this;

                if (self.typingTimeout) {
                    clearTimeout(self.typingTimeout);
                }

                if (event.target.type !== 'text') {
                    event.target.type = 'text';
                }

                self.typingTimeout = setTimeout(function() {
                    event.target.type = 'password';
                    self.typingTimeout = 0;
                }, 750);
            }
        }
    });
</script>
