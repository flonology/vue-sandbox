<script type="text/x-template" id="selfhide-password-tpl">
    <input
        v-bind:type="inputType"
        v-bind:value="value"
        v-on:input="typingShowHide"
    />
</script>


<script>
    Vue.component('selfhide-password', {
        template: '#selfhide-password-tpl',
        props: [ 'value' ],
        data: function() {
            return {
                inputType: 'password',
                typingTimeout: 0
            };
        },
        methods: {
            typingShowHide: function(event) {
                var self = this;
                self.$emit('input', event.target.value);

                if (self.typingTimeout) {
                    clearTimeout(self.typingTimeout);
                }

                if (event.target.type !== 'text') {
                    event.target.type = 'text';
                }

                self.typingTimeout = setTimeout(function() {
                    event.target.type = 'password';
                    self.typingTimeout = 0;
                }, 750);
            }
        }
    });
</script>
